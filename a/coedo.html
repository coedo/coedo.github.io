<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>HTML5 TIPS</title>
	<!--キャンバスの背景色／枠線を指定（3）-->
	<style>
		#cv {
			background-color: yellow;
			border: 3px solid black;
		}
	</style>
</head>
<body>
<!--キャンバスの準備（1）-->
<canvas id="cv" width="400" height="300">
	<!--Canvas機能に対応していないブラウザへの備え（2）-->
	Canvas機能に対応したブラウザでアクセスしてください。
</canvas>
<div><img id="newImg"></div>
<script>
	var cvs = document.getElementById("cv");
	var ctx = cvs.getContext("2d");

	//canvasにランダムなカラーラインを描く関数
	function chgCol()
	{
		for ( var i = 0 ; i < 9 ; i++ )
		{
			var r = Math.floor(Math.random()*256);
			var g = Math.floor(Math.random()*256);
			var b = Math.floor(Math.random()*256);

			ctx.fillStyle = "rgb(" + r + "," + g + "," + b + ")";
			ctx.fillRect( 40*i, 0, 40, 240 );
		}
	}

	//canvasデータを画像に変換にする関数
	function chgImg()
	{
		var png = cvs.toDataURL();
		document.getElementById("newImg").src = png;
	}

	chgCol();
	chgImg();
</script>
</body>
</html>
